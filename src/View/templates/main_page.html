{% extends "base.html" %}
{% block title %}	Main{% endblock %}
{% block content %}

<div id='cssmenu'>
<ul>

		<li><a href="{{ path_for('main') }}">Main</a></li>
		
		<li><a href="{{ path_for('update') }}">Update</a></li>
		
		<li><a href="{{ path_for('sharing') }}">Shared</a></li>
		
		<li style="float:right"><a href="{{ path_for('main') }}"><img  src="{{ base_path}}/assets/images/{{name}}.jpg" height="30" width="30" alt="profile logo"/></a></li>
		
		<li style="float:right"><a href="#">Logged : {{ name }}</a></li>
		
		<li style="float:right"><a href="{{ path_for('logout') }}">logout</a></li>
		
		
		<li style="float:right"><a class="danger" href="{{ path_for('remove') }}">Remove account</a></li>
	
</ul>
</div>
	
	<script>
	function file_up(path){
		document.write('<form action="{{ path_for("file_up") }}" method="post" enctype="multipart/form-data"> <input type="file" name="file_up" id="file_up"><input name="path" value='+path+' type="hidden"><input type="submit" value="upload"></form>');
	}
	
	function create(path){
		var name =prompt("Name : ");
		if(name!=""){

			document.write('<form name="fcreate" action="{{ path_for("folder_new") }}" method="post"> <input name="path" value='+path+' type="hidden"> <input name="name" value='+name+' type="hidden"></form>');
			fcreate.submit();
		}
		else
			alert("Invalid new name");
		
	}
	
	function share(path){
		var email =prompt("User Email : ");
		if(email!=""){
			document.write('<form name="fshare" action="{{ path_for("share") }}" method="post"> <input name="path" value='+path+' type="hidden"> <input name="email" value='+email+' type="hidden"></form>');
			fshare.submit();
		}
		else
			alert("Invalid new name");
		
	}
	
	function rename(path,o_name){
		var new_name =prompt("New name : ");
		if(new_name!=""){
			document.write('<form name="frename" action="{{ path_for("rename") }}" method="post"><input name="path" value='+path+' type="hidden"><input name="o_name" value='+o_name+' type="hidden">	<input name="new_name" value='+new_name+' type="hidden"></form>');
			frename.submit();
		}
		else
			alert("Invalid new name");
		
	}
	</script>
	
	<div class="limiter">
		<div class="container-table100">
			<div class="wrap-table100">
				<div class="table100">
					<table>
						 <thead>
   
       <tr class="table100-head">
		   <th class="column1" align="center">Type </th>
           <th class="column1" align="center">Name </th>
		   <th class="column1" align="center">Enter/DL</th>
		   <th class="column1" align="center">Remove</th>
		   <th class="column1" align="center">Rename</th>
       </tr>
	   
   </thead>
   
   <tbody>
       
	{% for list_data in content|reverse %}
		{% if list_data[1] != "dot" %}
			<tr>
			
			<td class="column1">{{list_data[1]}} </td>
			<td class="column1">{{list_data[0]}} </td>
			
			
			{% if list_data[1] == "Folder" %}
				<td class="column1"><a href="{{ path_for('main') }}?folder={{list_data[0]}}">Enter</a> </td>
			{% endif %}
			
			{% if list_data[1] == "File" %}
				<td class="column1"><a href="{{ path_for('dl') }}?file={{list_data[2]}}/{{list_data[0]}}">Download</a> </td>
			{% endif %}
			
			<td class="column1"><a href="{{ path_for('file_r') }}?remove={{list_data[2]}}/{{list_data[0]}}">{{list_data[0]}}</a>  </td>
			<td class="column1"><a href="javascript:rename('{{list_data[2]}}','{{list_data[0]}}');">{{list_data[0]}}</a>  </td>
			
			</tr>
			
		{% elseif  list_data[0] != "." %}
			<tr><td colspan="5"><a href="javascript:file_up('{{list_data[2]}}');">Upload new file</a> </td></tr>
			<tr><td colspan="5"><a href="javascript:create('{{list_data[2]}}');">Create new folder</a></td></tr>
			<tr><td colspan="5"><a href="javascript:share('{{list_data[2]}}');">Share</a> </td></tr>
		{% endif %}
		
	{% endfor %}
	
   </tbody>
						
					</table>
				</div>
			</div>
		</div>
	</div>


{% endblock %}